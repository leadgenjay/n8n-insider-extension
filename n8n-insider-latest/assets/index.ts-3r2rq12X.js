(function(){function l(){if(!(document.querySelector('[data-test-id="workflow-canvas"]')!==null||document.querySelector(".n8n-canvas")!==null||window.location.href.includes("n8n")||document.title.toLowerCase().includes("n8n")))return{isN8nPage:!1};const o=document.querySelector('[data-test-id="workflow-name-input"]')?.textContent||document.querySelector(".workflow-name")?.textContent||document.title.replace(" - n8n","").trim(),t=document.querySelectorAll('[data-test-id^="node-"], .node-wrapper'),e=[];t.forEach(r=>{const c=r.querySelector(".node-name, .node-title")?.textContent,d=r.getAttribute("data-node-type")||"unknown";c&&e.push({name:c.trim(),type:d})});const a=window.location.href.match(/workflow[s]?\/([a-zA-Z0-9]+)/);return{isN8nPage:!0,workflowId:a?a[1]:void 0,workflowName:o,nodes:e.length>0?e:void 0}}chrome.runtime.onMessage.addListener((n,o,t)=>{switch(n.type){case"EXTRACT_WORKFLOW":const e=l();t(e);break;case"GET_PAGE_INFO":t({url:window.location.href,title:document.title,isN8nPage:l().isN8nPage});break;default:console.log("Unknown message type:",n.type)}});console.log("[N8N Insider] Content script loaded");
})()
